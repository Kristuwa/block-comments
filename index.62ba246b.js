var form=document.querySelector(".callback-form"),listComments=document.querySelector(".section-cases__list"),inputDateForm=document.querySelector("#start");form.addEventListener("submit",onFormSubmit),listComments.addEventListener("click",onCloseBtn),listComments.addEventListener("click",onLikeBtn),inputDateForm.addEventListener("input",onInputDate);var formData={};function onFormSubmit(t){t.preventDefault(),new FormData(t.currentTarget).forEach((function(t,e){formData[e]=t})),changeDateForComment(),addToHTML(formData),form.reset()}function addToHTML(t){return listComments.insertAdjacentHTML("beforeend",markupComment(t))}function markupComment(t){var e=t.name,n=t.comment,a=t.date;return'<li class="section-cases__item">\n  <p class="section-cases__name">'.concat(e,'</p>\n \n  <div class="section-cases__text-content"><p class="section-cases__comment">').concat(n,'</p></div>\n  <p class="section-cases__date">').concat(a,'</p>\n  <button type="button" class=\'section-cases__btn-close btn\' aria-label="close"></button>\n<button type="button" class=\'section-cases__btn-like btn\' aria-label="like"><span class="count">0</span><span><svg\nwidth="32" height="32" class="like-btn">\n<use href="./images/icons.svg#icon-heart"></use>\n</svg></span></button>\n</li>')}function onCloseBtn(t){"BUTTON"===t.target.nodeName&&"section-cases__btn-close btn"===t.target.closest("button").className&&(t.target.closest("li").style.display="none")}function onLikeBtn(t){if("BUTTON"===t.target.nodeName&&"section-cases__btn-like btn"===t.target.closest("button").className){var e=t.target.querySelector(".count");e.classList.toggle("add");var n=Number(e.textContent);e.classList.contains("add")?n+=1:n-=1,e.innerHTML=n}}function onInputDate(t){if(year=Number(t.target.value.split("-")[0]),month=Number(t.target.value.split("-")[1]),day=Number(t.target.value.split("-")[2]),new Date(year,month-1,day).getTime()>Date.now())return t.target.value="",void alert("Выберете текущую дату, либо ранее!!")}function changeDateForComment(){var t=Number(formData.date.split("-")[0]),e=Number(formData.date.split("-")[1]),n=Number(formData.date.split("-")[2]),a=new Date,o=a.getHours(),s=a.getMinutes(),c=new Date(t,e-1,n).getTime(),r=-864e5,i=36e5*-o-6e4*s-1e3*a.getSeconds()-a.getMilliseconds()+r,m=c-a.getTime();o<10&&(o="0".concat(o)),s<10&&(s="0".concat(s)),e<10&&(e="0".concat(e)),n<10&&(n="0".concat(n)),Number(m)>=r&&Number(m)<0||""===formData.date?formData.date="сегодня, ".concat(o,":").concat(s):Number(m)===i?formData.date="вчера, ".concat(o,":").concat(s):formData.date="".concat(n,".").concat(e,".").concat(t,", ").concat(o,":").concat(s)}
//# sourceMappingURL=index.62ba246b.js.map
