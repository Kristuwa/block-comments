{"mappings":"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","sources":["src/js/form.js"],"sourcesContent":["let form = document.querySelector('.callback-form');\nlet listComments = document.querySelector('.section-cases__list');\nlet inputDateForm = document.querySelector('#start');\nlet textareaInput = document.querySelector('.callback-form__textarea');\n\nform.addEventListener('submit', onFormSubmit);\nlistComments.addEventListener('click', onCloseBtn);\nlistComments.addEventListener('click', onLikeBtn);\ninputDateForm.addEventListener('input', onInputDate);\ntextareaInput.addEventListener('input', onInputTextarea);\n\nlet formData = {};\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  const formDataResults = new FormData(e.currentTarget);\n\n  formDataResults.forEach((value, name) => {\n    formData[name] = value;\n  });\n\n  changeDateForComment();\n\n  addToHTML(formData);\n\n  form.reset();\n}\n\nfunction addToHTML(data) {\n  return listComments.insertAdjacentHTML('beforeend', markupComment(data));\n}\n\nfunction markupComment({ name, comment, date }) {\n  return `<li class=\"section-cases__item\">\n  <p class=\"section-cases__name\">${name}</p>\n \n  <div class=\"section-cases__text-content\"><p class=\"section-cases__comment\">${comment}</p></div>\n  <p class=\"section-cases__date\">${date}</p>\n  <button type=\"button\" class='section-cases__btn-close btn' aria-label=\"close\">\n  <svg class=\"icon-bin\" width=\"20\" height=\"20\"><use xlink:href=\"#icon-bin\"><symbol id=\"icon-bin\" viewBox=\"0 0 32 32\">\n  <path d=\"M6 32h20l2-22h-24zM20 4v-4h-8v4h-10v6l2-2h24l2 2v-6h-10zM18 4h-4v-2h4v2z\"></path>\n  </symbol></use></svg></button>\n<button type=\"button\" class='section-cases__btn-like btn' aria-label=\"like\">\n<span class=\"count\">0</span>\n<svg class=\"icon-heart\" width=\"20\" height=\"20\"><use xlink:href=\"#icon-heart\">\n<symbol id=\"icon-heart\" viewBox=\"0 0 32 32\">\n<path d=\"M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z\"></path>\n</symbol></use></svg></button>\n</li>`;\n}\n\nfunction onCloseBtn(e) {\n  const buttonClose = e.target.closest('button');\n  if (!buttonClose) {\n    console.log(e.target);\n    return;\n  }\n  if (buttonClose.className === 'section-cases__btn-close btn') {\n    e.target.closest('li').style.display = 'none';\n  }\n}\n\nfunction onLikeBtn(e) {\n  const buttonLike = e.target.closest('button');\n  if (!buttonLike) {\n    console.log(e.target);\n    return;\n  }\n  if (buttonLike.className === 'section-cases__btn-like btn') {\n    let counter = buttonLike.querySelector('.count');\n\n    counter.classList.toggle('add');\n\n    let count = Number(counter.textContent);\n\n    if (counter.classList.contains('add')) {\n      count += 1;\n    } else {\n      count -= 1;\n    }\n    counter.innerHTML = count;\n  }\n}\n\nfunction onInputDate(e) {\n  year = Number(e.target.value.split('-')[0]);\n  month = Number(e.target.value.split('-')[1]);\n  day = Number(e.target.value.split('-')[2]);\n\n  const date = new Date(year, month - 1, day);\n  const dateInMs = date.getTime();\n  const nowDate = Date.now();\n\n  if (dateInMs > nowDate) {\n    e.target.value = '';\n    alert('Выберете текущую дату, либо ранее!!');\n    return;\n  }\n}\n\nfunction changeDateForComment() {\n  let year = Number(formData.date.split('-')[0]);\n  let month = Number(formData.date.split('-')[1]);\n  let day = Number(formData.date.split('-')[2]);\n  let dateNow = new Date();\n  let hours = dateNow.getHours();\n  let minutes = dateNow.getMinutes();\n\n  const date = new Date(year, month - 1, day);\n  const dateInMs = date.getTime();\n\n  let hours24ToMs = -86400000;\n  let yesterdayTime =\n    -hours * 60 * 60 * 1000 -\n    minutes * 60 * 1000 -\n    dateNow.getSeconds() * 1000 -\n    dateNow.getMilliseconds() +\n    hours24ToMs;\n\n  const result = dateInMs - dateNow.getTime();\n\n  if (hours < 10) {\n    hours = `0${hours}`;\n  }\n\n  if (minutes < 10) {\n    minutes = `0${minutes}`;\n  }\n\n  if (month < 10) {\n    month = `0${month}`;\n  }\n\n  if (day < 10) {\n    day = `0${day}`;\n  }\n\n  if (\n    (Number(result) >= hours24ToMs && Number(result) < 0) ||\n    formData.date === ''\n  ) {\n    formData.date = `сегодня, ${hours}:${minutes}`;\n  } else if (Number(result) === yesterdayTime) {\n    formData.date = `вчера, ${hours}:${minutes}`;\n  } else {\n    formData.date = `${day}.${month}.${year}, ${hours}:${minutes}`;\n  }\n}\n\nfunction onInputTextarea(e) {\n  if (e.target.value.length === 280) {\n    alert('Вы ввели максимальное количество символов');\n  }\n}\n"],"names":["form","document","querySelector","listComments","inputDateForm","textareaInput","addEventListener","onFormSubmit","onCloseBtn","onLikeBtn","onInputDate","onInputTextarea","formData","e","preventDefault","FormData","currentTarget","forEach","value","name","changeDateForComment","addToHTML","reset","data","insertAdjacentHTML","markupComment","param","comment","date","concat","buttonClose","target","closest","className","style","display","console","log","buttonLike","counter","classList","toggle","count","Number","textContent","contains","innerHTML","year","split","month","day","Date","getTime","now","alert","dateNow","hours","getHours","minutes","getMinutes","dateInMs","hours24ToMs","yesterdayTime","getSeconds","getMilliseconds","result","length"],"version":3,"file":"index.c38c96e0.js.map"}